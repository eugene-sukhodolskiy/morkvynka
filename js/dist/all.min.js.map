{"version":3,"sources":["app.js"],"names":["document","addEventListener","e","querySelectorAll","forEach","i","dmenu","currentTarget","parentNode","querySelector","setTimeout","classList","contains","remove","add","jQuery","click","preventDefault","product_id","this","data","btn","let","action","ajax","url","wc_add_to_cart_params","ajax_url","type","success","response","cont","createElement","cart_item_key","innerHTML","fragments","getAttribute","attr","console","log","error"],"mappings":"AAAAA,SAAAC,iBAAA,mBAAAC,IACAF,SAAAG,iBAAA,2BAAA,EAAAC,QAAAC,IACAA,EAAAJ,iBAAA,QAAAC,IACA,MAAAI,EAAAJ,EAAAK,cAAAC,WAAAC,cAAA,kBAAA,EACAC,WAAA,KACAJ,EAAAK,UAAAC,SAAA,MAAA,EACAN,EAAAK,UAAAE,OAAA,MAAA,EAEAP,EAAAK,UAAAG,IAAA,MAAA,CAEA,EAAA,EAAA,CACA,CAAA,CACA,CAAA,EAEAd,SAAAC,iBACA,QACAC,GAAAF,SAAAG,iBAAA,qBAAA,EAAAC,QAAAC,GAAAA,EAAAM,UAAAE,OAAA,MAAA,CAAA,CACA,EAEAE,OAAA,cAAA,EAAAC,MAAA,SAAAd,GACAA,EAAAe,eAAA,EACA,IAAAC,EAAAH,OAAAI,IAAA,EAAAC,KAAA,YAAA,EACA,MAAAC,EAAAF,KACAG,IAAAF,EAAA,CACAG,OAAA,0BACAL,WAAAA,CACA,EACA,GAAAG,EAAAV,UAAAC,SAAA,SAAA,EAEA,MAAA,CAAA,EAUAS,EAAAV,UAAAG,IAAA,SAAA,EAGAC,OAAAS,KAAA,CACAC,IAAAC,sBAAAC,SACAC,KAAA,OACAR,KAAAA,EACAS,QAAA,SAAAC,GACA,IAAAC,EAAA/B,SAAAgC,cAAA,KAAA,EAEAC,GADAF,EAAAG,UAAAJ,EAAAK,UAAA,oCACAJ,EAAAtB,cAAA,uBAAA,EAAA2B,aAAA,oBAAA,GACArB,OAAAM,CAAA,EAAAgB,KAAA,qBAAAJ,CAAA,EACAK,QAAAC,IAAArB,EAAA,oBAAA,CACA,EACAsB,MAAA,SAAAA,GACAnB,EAAAV,UAAAC,SAAA,SAAA,EACAS,EAAAV,UAAAE,OAAA,SAAA,EAEAQ,EAAAV,UAAAG,IAAA,SAAA,EAEAwB,QAAAE,WAAAtB,iBAAA,CACA,CACA,CAAA,CACA,CAAA,CAEA,CAAA","file":"all.min.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", e => {\n\tdocument.querySelectorAll(\".dropdown-toggle.nav-link\").forEach(i => {\n\t\ti.addEventListener(\"click\", e => {\n\t\t\tconst dmenu = e.currentTarget.parentNode.querySelector(\"ul.dropdown-menu\");\n\t\t\tsetTimeout(() => {\n\t\t\t\tif(dmenu.classList.contains(\"show\")) {\n\t\t\t\t\tdmenu.classList.remove(\"show\");\n\t\t\t\t}else {\n\t\t\t\t\tdmenu.classList.add(\"show\");\n\t\t\t\t}\n\t\t\t}, 50);\n\t\t});\n\t})\n\n\tdocument.addEventListener(\n\t\t\"click\", \n\t\te => document.querySelectorAll(\".dropdown-menu.show\").forEach(i => i.classList.remove(\"show\"))\n\t);\n\n\tjQuery('.add-to-cart').click(function(e) {\n    e.preventDefault();\n    var product_id = jQuery(this).data('product_id');\n  \tconst btn = this;\n  \tlet data = {\n      'action': 'woocommerce_add_to_cart',\n      'product_id': product_id,\n    };\n  \tif(btn.classList.contains(\"already\")){\n  \t\t// Заглушка \n  \t\treturn false;\n\n  \t\tdata = {\n        'action': 'woocommerce_remove_cart_item',\n      \t'product_id': product_id,\n      \t'quantity': 10,\n        'cart_item_key': btn.getAttribute(\"data-cart_item_key\")\n      }\n  \t\tbtn.classList.remove(\"already\");\n  \t} else {\n\t\t\tbtn.classList.add(\"already\");\n  \t}\n\n    jQuery.ajax({\n      url: wc_add_to_cart_params.ajax_url,\n      type: 'POST',\n      data: data,\n      success: function(response) {\n      \tconst cont = document.createElement(\"DIV\");\n      \tcont.innerHTML = response.fragments[\"div.widget_shopping_cart_content\"];\n      \tconst cart_item_key = cont.querySelector(\"a[data-cart_item_key]\").getAttribute(\"data-cart_item_key\");\n      \tjQuery(btn).attr(\"data-cart_item_key\", cart_item_key);\n        console.log(`${product_id} was added to cart`)\n      },\n      error: function(error) {\n  \t\t\tif(btn.classList.contains(\"already\")){\n\t\t  \t\tbtn.classList.remove(\"already\");\n\t\t  \t} else {\n\t\t\t\t\tbtn.classList.add(\"already\");\n\t\t  \t}\n        console.error(`ID${product_id} Operation err`)\n      }\n    });\n\t});\n\n});"]}